postgresql:
  image:
    repository: pgvector/pgvector
    tag: pg18-trixie
    pullPolicy: IfNotPresent

  replicaCount: 1

  annotations: {}

  updateStrategy:
    type: RollingUpdate
    rollingUpdate:
      partition: 0

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

  persistence:
    enabled: true
    storageClass: ""
    size: 10Gi

  database: postgres
  username: postgres

  existingSecret:
    enabled: false
    name: ""
    usernameKey: username
    passwordKey: password
    databaseKey: database

  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6

  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6

  affinity: {}

  podDisruptionBudget:
    enabled: true
    minAvailable: 1

  lifecycle:
    postStart:
      additionalCommands: |
        psql -U postgres -d "$POSTGRES_DB" -c "CREATE EXTENSION IF NOT EXISTS vector;" > /dev/null 2>&1

repmgr:
  image:
    repository: cagriekin/repmgr
    tag: trixie-5.5.0
    pullPolicy: IfNotPresent

  enabled: true

  username: repmgr
  database: repmgr

  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

pgpool:
  enabled: false

  image:
    repository: cagriekin/pgpool
    tag: 4.7.0
    pullPolicy: IfNotPresent

  replicaCount: 1

  numInitChildren: 32
  maxPool: 4
  childLifeTime: 300
  connectionLifeTime: 0
  clientIdleLimit: 0

  logging:
    logConnections: false
    logStatement: false
    logPerNodeStatement: false

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  adminUsername: admin
  adminPassword: admin

  service:
    type: ClusterIP
    port: 9999

  affinity: {}

  podDisruptionBudget:
    enabled: true
    minAvailable: 1

prometheusExporter:
  enabled: false

  image:
    repository: quay.io/prometheuscommunity/postgres-exporter
    tag: v0.15.0
    pullPolicy: IfNotPresent

  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

  service:
    type: ClusterIP
    port: 9116
    annotations: {}

  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    additionalLabels: {}

service:
  type: ClusterIP
  port: 5432

global:
  annotations: {}
